<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lidar simulation using TROLL • rcontroll</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Lidar simulation using TROLL">
<meta property="og:description" content="rcontroll">
<meta property="og:image" content="https://sylvainschmitt.github.io/rcontroll/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rcontroll</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/climate.html">Generate climate data</a>
    </li>
    <li>
      <a href="../articles/lidar.html">Lidar simulation using TROLL</a>
    </li>
    <li>
      <a href="../articles/troll.html">The TROLL model</a>
    </li>
    <li>
      <a href="../articles/workflow.html">A simple workflow</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sylvainschmitt/rcontroll/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Lidar simulation using TROLL</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sylvainschmitt/rcontroll/blob/HEAD/vignettes/lidar.Rmd" class="external-link"><code>vignettes/lidar.Rmd</code></a></small>
      <div class="hidden name"><code>lidar.Rmd</code></div>

    </div>

    
    
<p>This vignette gives a quick example of a simple workflow to produce
discrete lidar point clouds from TROLL simulation and corresponding
height canopy models.</p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>We will use <code>rcontroll</code> with a previous simulation
(<code>TROLLv3_output</code>) as a starting point for new
simulations.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sylvainschmitt/rcontroll" class="external-link">rcontroll</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"TROLLv3_output"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="lidar-simulation">Lidar simulation<a class="anchor" aria-label="anchor" href="#lidar-simulation"></a>
</h2>
<p>The <code>troll</code> function include a <code>lidar</code> input to
specify the details of the lidar simulation that can be easily generated
using the <code>generate_lidar</code> function. Parameters for the lidar
simulation includes mean and standard deviation of pulse density, the
laser attenuation factor, the transmittance of laser after hit, and the
iteration for point cloud generation (see
<code><a href="../reference/generate_lidar.html">?generate_lidar</a></code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/troll.html">troll</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"test"</span>,</span>
<span>  global <span class="op">=</span> <span class="fu"><a href="../reference/update_parameters.html">update_parameters</a></span><span class="op">(</span><span class="va">TROLLv3_output</span>, nbiter <span class="op">=</span> <span class="fl">12</span> <span class="op">*</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  species <span class="op">=</span> <span class="va">TROLLv3_output</span><span class="op">@</span><span class="va">inputs</span><span class="op">$</span><span class="va">species</span>,</span>
<span>  climate <span class="op">=</span> <span class="va">TROLLv3_output</span><span class="op">@</span><span class="va">inputs</span><span class="op">$</span><span class="va">climate</span>,</span>
<span>  daily <span class="op">=</span> <span class="va">TROLLv3_output</span><span class="op">@</span><span class="va">inputs</span><span class="op">$</span><span class="va">daily</span>,</span>
<span>  forest <span class="op">=</span> <span class="fu"><a href="../reference/get_forest.html">get_forest</a></span><span class="op">(</span><span class="va">TROLLv3_output</span><span class="op">)</span>,</span>
<span>  lidar <span class="op">=</span> <span class="fu"><a href="../reference/generate_lidar.html">generate_lidar</a></span><span class="op">(</span>mean_beam_pc <span class="op">=</span> <span class="fl">10</span>, iter_pointcloud_generation <span class="op">=</span> <span class="fl">11</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Printing the output <code>rcontroll</code> inform the lidar
simulation status:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span></span>
<span><span class="co">#&gt; Object of class : trollsim </span></span>
<span><span class="co">#&gt; Name : test </span></span>
<span><span class="co">#&gt; Path :  </span></span>
<span><span class="co">#&gt; Extended : TRUE </span></span>
<span><span class="co">#&gt; From data : FALSE </span></span>
<span><span class="co">#&gt; Lidar simulation : TRUE </span></span>
<span><span class="co">#&gt; Random : FALSE </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 2D discrete network: horizontal step =  1 m, one tree per 1 m^2 </span></span>
<span><span class="co">#&gt; Number of sites      :  100 x 100 </span></span>
<span><span class="co">#&gt; Number of iterations :  12 </span></span>
<span><span class="co">#&gt; Duration of timestep :  30.41667 days </span></span>
<span><span class="co">#&gt; Number of Species    :  45</span></span></code></pre></div>
<p>The point cloud can be accessed in a list in the attribute
<code>@las</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">@</span><span class="va">las</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; class        : LAS (v1.2 format 0)</span></span>
<span><span class="co">#&gt; memory       : 4.9 Mb </span></span>
<span><span class="co">#&gt; extent       : 0, 100, 0, 100 (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref.  : NA </span></span>
<span><span class="co">#&gt; area         : 10028 units²</span></span>
<span><span class="co">#&gt; points       : 142.3 thousand points</span></span>
<span><span class="co">#&gt; density      : 14.19 points/units²</span></span>
<span><span class="co">#&gt; density      : 9.55 pulses/units²</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lidR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lidR/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sim</span><span class="op">@</span><span class="va">las</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><code>lidR</code> include a <code>plot</code> method for las objects
with a nice 3D interactive plot.</p>
</blockquote>
<p><code>rcontroll</code> includes a <code>get_chm</code> method to
extract the canopy height model from the point cloud as a raster:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_chm.html">get_chm</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span></span>
<span><span class="co">#&gt; $test</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 102, 102, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span><span class="co">#&gt; extent      : -1, 101, -1, 101  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. :  </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; name        : canopy_height </span></span>
<span><span class="co">#&gt; min value   :      1.101667 </span></span>
<span><span class="co">#&gt; max value   :     41.005556</span></span></code></pre></div>
<p><code>rcontroll</code> includes in the <code>autoplot</code> method
an automatic plot of the canopy height model when choosing
<code>what = "lidar"</code> (if the lidar simulations as been activated
obviously):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rcontroll</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">sim</span>, what <span class="op">=</span> <span class="st">"lidar"</span><span class="op">)</span></span></code></pre></div>
<p><img src="lidar_files/figure-html/unnamed-chunk-8-1.png" width="576"></p>
<blockquote>
<p>Prefer to use <code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">rcontroll::autoplot</a></code> instead of
<code>autoplot</code> alone to avoid namespace conflict with
<code>ggplot2</code>.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="lidar-stack">Lidar stack<a class="anchor" aria-label="anchor" href="#lidar-stack"></a>
</h2>
<p>Similarly, the <code>stack</code> function include a
<code>lidar</code> input to specify the details of the lidar simulation
that can be easily generated using the <code>generate_lidar</code>
function. Here we test the difference between a simulation with mean
pulse density of 10 (<code>10pc</code>) and 20 (<code>20pc</code>):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sim_stack <span class="ot">&lt;-</span> <span class="fu">stack</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"teststack"</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">simulations =</span> <span class="fu">c</span>(<span class="st">"10pc"</span>, <span class="st">"20pc"</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">global =</span> <span class="fu">update_parameters</span>(TROLLv3_output, <span class="at">nbiter =</span> <span class="dv">12</span> <span class="sc">*</span> <span class="dv">1</span>),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">species =</span> TROLLv3_output<span class="sc">@</span>inputs<span class="sc">$</span>species,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">climate =</span> TROLLv3_output<span class="sc">@</span>inputs<span class="sc">$</span>climate,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">daily =</span> TROLLv3_output<span class="sc">@</span>inputs<span class="sc">$</span>daily,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">forest =</span> <span class="fu">get_forest</span>(TROLLv3_output),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">lidar =</span> <span class="fu">list</span>(</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"10pc"</span> <span class="ot">=</span> <span class="fu">generate_lidar</span>(<span class="at">mean_beam_pc =</span> <span class="dv">10</span>, <span class="at">iter_pointcloud_generation =</span> <span class="dv">11</span>),</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"20pc"</span> <span class="ot">=</span> <span class="fu">generate_lidar</span>(<span class="at">mean_beam_pc =</span> <span class="dv">10</span>, <span class="at">iter_pointcloud_generation =</span> <span class="dv">11</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(<span class="at">.id =</span> <span class="st">"simulation"</span>),</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">cores =</span> <span class="dv">2</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">thin =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span></code></pre></div>
<p>Printing the output <code>rcontroll</code> inform the lidar
simulation status:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_stack</span></span>
<span><span class="co">#&gt; Object of class : trollstack </span></span>
<span><span class="co">#&gt; Name : 10pc </span></span>
<span><span class="co">#&gt; Path : /tmp/RtmpouYwPb/rcontroll/teststack </span></span>
<span><span class="co">#&gt; Number of simulations : 2 </span></span>
<span><span class="co">#&gt; Extended : TRUE </span></span>
<span><span class="co">#&gt; From data : FALSE </span></span>
<span><span class="co">#&gt; Lidar simulation : TRUE </span></span>
<span><span class="co">#&gt; Random : FALSE </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 2D discrete network: horizontal step =  1 m, one tree per 1 m^2 </span></span>
<span><span class="co">#&gt; Number of sites      :  100 x 100 </span></span>
<span><span class="co">#&gt; Number of iterations :  12 </span></span>
<span><span class="co">#&gt; Duration of timestep :  30.41667 days </span></span>
<span><span class="co">#&gt; Number of Species    :  45</span></span></code></pre></div>
<p>The point clouds can be accessed in a list in the attribute
<code>@las</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_stack</span><span class="op">@</span><span class="va">las</span></span>
<span><span class="co">#&gt; $`10pc`</span></span>
<span><span class="co">#&gt; class        : LAS (v1.2 format 0)</span></span>
<span><span class="co">#&gt; memory       : 4.9 Mb </span></span>
<span><span class="co">#&gt; extent       : 0, 100, 0, 100 (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref.  : NA </span></span>
<span><span class="co">#&gt; area         : 10028 units²</span></span>
<span><span class="co">#&gt; points       : 142.3 thousand points</span></span>
<span><span class="co">#&gt; density      : 14.19 points/units²</span></span>
<span><span class="co">#&gt; density      : 9.55 pulses/units²</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`20pc`</span></span>
<span><span class="co">#&gt; class        : LAS (v1.2 format 0)</span></span>
<span><span class="co">#&gt; memory       : 4.9 Mb </span></span>
<span><span class="co">#&gt; extent       : 0, 100, 0, 100 (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref.  : NA </span></span>
<span><span class="co">#&gt; area         : 10028 units²</span></span>
<span><span class="co">#&gt; points       : 142.3 thousand points</span></span>
<span><span class="co">#&gt; density      : 14.19 points/units²</span></span>
<span><span class="co">#&gt; density      : 9.55 pulses/units²</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">lidR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lidR/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sim_stack</span><span class="op">@</span><span class="va">las</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><code>rcontroll</code> includes a <code>get_chm</code> method to
extract the canopy height model from the point clouds as a raster:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_chm.html">get_chm</a></span><span class="op">(</span><span class="va">sim_stack</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`10pc`</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 102, 102, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span><span class="co">#&gt; extent      : -1, 101, -1, 101  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. :  </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; name        : canopy_height </span></span>
<span><span class="co">#&gt; min value   :      1.101667 </span></span>
<span><span class="co">#&gt; max value   :     41.005556 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`20pc`</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 102, 102, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span><span class="co">#&gt; extent      : -1, 101, -1, 101  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. :  </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; name        : canopy_height </span></span>
<span><span class="co">#&gt; min value   :      1.101667 </span></span>
<span><span class="co">#&gt; max value   :     41.005556</span></span></code></pre></div>
<p><code>rcontroll</code> includes in the <code>autoplot</code> method
an automatic plot of the canopy height model when choosing
<code>what = "lidar"</code> (if the lidar simulations as been activated
obviously):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rcontroll</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">sim_stack</span>, what <span class="op">=</span> <span class="st">"lidar"</span><span class="op">)</span></span></code></pre></div>
<p><img src="lidar_files/figure-html/unnamed-chunk-14-1.png" width="576"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Sylvain Schmitt, Guillaume Salzet, Fabian Fischer, Isabelle Maréchaux, Jérôme Chave.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
